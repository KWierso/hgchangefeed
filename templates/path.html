{% extends "sidebar.html" %}

{% load tz %}
{% load mercurial %}

{% block title %}{{ repository }} {{ path }}{% endblock %}

{% block heading %}
<div class="feedicon">
  <a href="{% url 'feed' repository path %}"><img src="{{ STATIC_URL }}images/feed.png"></a>
</div>
<a href="{% url 'path' repository.name '' %}">{{ repository }}</a>
{% for parent in path.parentlist %}
{% if forloop.first %} - {% endif %}
<a href="{% url 'path' repository parent %}">{{ parent.name }}</a>
{% if not forloop.last %} / {% endif %}
{% endfor %}
{% endblock %}

{% block sidebar %}
<ul>
{% for path in paths %}
  <li class="path {% if path.is_dir %}directory{% else %}file{% endif %}"><a href="{% url 'path' repository path %}">{{ path.name }}</a></li>
{% endfor %}
</ul>
{% endblock %}

{% block content %}
<table class="changesets">
{% for changeset in changesets %}
  <tr>
    <td class="link"><a href="{% url 'changeset' repository changeset %}">Details</a></td>
    <td class="meta">
      {{ changeset }}<br>
      {% localtime off %}{{ changeset.localdate|date:"D M d H:i:s Y O" }}{% endlocaltime %}
    </td>
    <td class="summary"><span class="author">{{ changeset.user.name }}</span> - {{ changeset.description|summarise|bugzilla }}</td>
  </tr>
{% endfor %}
</table>
{% endblock %}
